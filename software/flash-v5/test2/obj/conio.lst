                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.8.0 #10562 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module conio
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _putdec
                             12 	.globl _puthex
                             13 	.globl _putchar
                             14 	.globl _getchar
                             15 	.globl _puts
                             16 	.globl _puthex8
                             17 	.globl _puthex16
                             18 	.globl _putdec8
                             19 	.globl _putdec16
                             20 ;--------------------------------------------------------
                             21 ; special function registers
                             22 ;--------------------------------------------------------
                             23 ;--------------------------------------------------------
                             24 ; ram data
                             25 ;--------------------------------------------------------
                             26 	.area _DATA
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area _INITIALIZED
                             31 ;--------------------------------------------------------
                             32 ; absolute external ram data
                             33 ;--------------------------------------------------------
                             34 	.area _DABS (ABS)
                             35 ;--------------------------------------------------------
                             36 ; global & static initialisations
                             37 ;--------------------------------------------------------
                             38 	.area _HOME
                             39 	.area _GSINIT
                             40 	.area _GSFINAL
                             41 	.area _GSINIT
                             42 ;--------------------------------------------------------
                             43 ; Home
                             44 ;--------------------------------------------------------
                             45 	.area _HOME
                             46 	.area _HOME
                             47 ;--------------------------------------------------------
                             48 ; code
                             49 ;--------------------------------------------------------
                             50 	.area _CODE
                             51 ;C:\devarea\Libraries\msxclib\lib\conio.c:7: void putchar(const char c) __naked {
                             52 ;	---------------------------------
                             53 ; Function putchar
                             54 ; ---------------------------------
   0000                      55 _putchar::
                             56 ;C:\devarea\Libraries\msxclib\lib\conio.c:14: __endasm;
                             57 ;A	= c
   0000 5F            [ 4]   58 	ld	e, a
   0001 0E 02         [ 7]   59 	ld	c, #2
   0003 CD 05 00      [17]   60 	call	5
   0006 C9            [10]   61 	ret
                             62 ;C:\devarea\Libraries\msxclib\lib\conio.c:15: }
                             63 ;C:\devarea\Libraries\msxclib\lib\conio.c:17: char getchar(void) {
                             64 ;	---------------------------------
                             65 ; Function getchar
                             66 ; ---------------------------------
   0007                      67 _getchar::
                             68 ;C:\devarea\Libraries\msxclib\lib\conio.c:23: __endasm;
   0007 0E 08         [ 7]   69 	ld	c, #8
   0009 CD 05 00      [17]   70 	call	5
   000C 7D            [ 4]   71 	ld	a, l
   000D C9            [10]   72 	ret	; A = return value
                             73 ;C:\devarea\Libraries\msxclib\lib\conio.c:24: }
   000E C9            [10]   74 	ret
                             75 ;C:\devarea\Libraries\msxclib\lib\conio.c:26: void puts(const char *s) {
                             76 ;	---------------------------------
                             77 ; Function puts
                             78 ; ---------------------------------
   000F                      79 _puts::
                             80 ;C:\devarea\Libraries\msxclib\lib\conio.c:27: while (*s != 0) {
   000F D1            [10]   81 	pop	de
   0010 C1            [10]   82 	pop	bc
   0011 C5            [11]   83 	push	bc
   0012 D5            [11]   84 	push	de
   0013                      85 00101$:
   0013 0A            [ 7]   86 	ld	a, (bc)
   0014 B7            [ 4]   87 	or	a, a
   0015 C8            [11]   88 	ret	Z
                             89 ;C:\devarea\Libraries\msxclib\lib\conio.c:28: putchar(*s++);
   0016 03            [ 6]   90 	inc	bc
   0017 C5            [11]   91 	push	bc
   0018 F5            [11]   92 	push	af
   0019 33            [ 6]   93 	inc	sp
   001A CDr00r00      [17]   94 	call	_putchar
   001D 33            [ 6]   95 	inc	sp
   001E C1            [10]   96 	pop	bc
                             97 ;C:\devarea\Libraries\msxclib\lib\conio.c:30: }
   001F 18 F2         [12]   98 	jr	00101$
                             99 ;C:\devarea\Libraries\msxclib\lib\conio.c:32: void puthex(int8_t nibbles, uint16_t v) {
                            100 ;	---------------------------------
                            101 ; Function puthex
                            102 ; ---------------------------------
   0021                     103 _puthex::
                            104 ;C:\devarea\Libraries\msxclib\lib\conio.c:33: int8_t i = nibbles - 1;
   0021 21 02 00      [10]  105 	ld	hl, #2+0
   0024 39            [11]  106 	add	hl, sp
   0025 4E            [ 7]  107 	ld	c, (hl)
   0026 0D            [ 4]  108 	dec	c
                            109 ;C:\devarea\Libraries\msxclib\lib\conio.c:34: while (i >= 0) {
   0027                     110 00104$:
   0027 CB 79         [ 8]  111 	bit	7, c
   0029 C0            [11]  112 	ret	NZ
                            113 ;C:\devarea\Libraries\msxclib\lib\conio.c:35: uint16_t aux = (v >> (i << 2)) & 0x000F;
   002A 79            [ 4]  114 	ld	a, c
   002B 87            [ 4]  115 	add	a, a
   002C 87            [ 4]  116 	add	a, a
   002D 47            [ 4]  117 	ld	b, a
   002E 21 03 00      [10]  118 	ld	hl, #3
   0031 39            [11]  119 	add	hl, sp
   0032 5E            [ 7]  120 	ld	e, (hl)
   0033 23            [ 6]  121 	inc	hl
   0034 56            [ 7]  122 	ld	d, (hl)
   0035 04            [ 4]  123 	inc	b
   0036 18 04         [12]  124 	jr	00126$
   0038                     125 00125$:
   0038 CB 3A         [ 8]  126 	srl	d
   003A CB 1B         [ 8]  127 	rr	e
   003C                     128 00126$:
   003C 10 FA         [13]  129 	djnz	00125$
   003E 7B            [ 4]  130 	ld	a, e
   003F E6 0F         [ 7]  131 	and	a, #0x0f
                            132 ;C:\devarea\Libraries\msxclib\lib\conio.c:36: uint8_t n = aux & 0x000F;
   0041 E6 0F         [ 7]  133 	and	a, #0x0f
   0043 5F            [ 4]  134 	ld	e, a
                            135 ;C:\devarea\Libraries\msxclib\lib\conio.c:38: putchar('A' + (n - 10));
   0044 43            [ 4]  136 	ld	b, e
                            137 ;C:\devarea\Libraries\msxclib\lib\conio.c:37: if (n > 9)
   0045 3E 09         [ 7]  138 	ld	a, #0x09
   0047 93            [ 4]  139 	sub	a, e
   0048 30 0D         [12]  140 	jr	NC,00102$
                            141 ;C:\devarea\Libraries\msxclib\lib\conio.c:38: putchar('A' + (n - 10));
   004A 78            [ 4]  142 	ld	a, b
   004B C6 37         [ 7]  143 	add	a, #0x37
   004D C5            [11]  144 	push	bc
   004E F5            [11]  145 	push	af
   004F 33            [ 6]  146 	inc	sp
   0050 CDr00r00      [17]  147 	call	_putchar
   0053 33            [ 6]  148 	inc	sp
   0054 C1            [10]  149 	pop	bc
   0055 18 0B         [12]  150 	jr	00103$
   0057                     151 00102$:
                            152 ;C:\devarea\Libraries\msxclib\lib\conio.c:40: putchar('0' + n);
   0057 78            [ 4]  153 	ld	a, b
   0058 C6 30         [ 7]  154 	add	a, #0x30
   005A C5            [11]  155 	push	bc
   005B F5            [11]  156 	push	af
   005C 33            [ 6]  157 	inc	sp
   005D CDr00r00      [17]  158 	call	_putchar
   0060 33            [ 6]  159 	inc	sp
   0061 C1            [10]  160 	pop	bc
   0062                     161 00103$:
                            162 ;C:\devarea\Libraries\msxclib\lib\conio.c:41: i--;
   0062 0D            [ 4]  163 	dec	c
                            164 ;C:\devarea\Libraries\msxclib\lib\conio.c:43: }
   0063 18 C2         [12]  165 	jr	00104$
                            166 ;C:\devarea\Libraries\msxclib\lib\conio.c:45: void puthex8(uint8_t v) {
                            167 ;	---------------------------------
                            168 ; Function puthex8
                            169 ; ---------------------------------
   0065                     170 _puthex8::
                            171 ;C:\devarea\Libraries\msxclib\lib\conio.c:46: puthex(2, (uint16_t) v);
   0065 21 02 00      [10]  172 	ld	hl, #2+0
   0068 39            [11]  173 	add	hl, sp
   0069 4E            [ 7]  174 	ld	c, (hl)
   006A 06 00         [ 7]  175 	ld	b, #0x00
   006C C5            [11]  176 	push	bc
   006D 3E 02         [ 7]  177 	ld	a, #0x02
   006F F5            [11]  178 	push	af
   0070 33            [ 6]  179 	inc	sp
   0071 CDr21r00      [17]  180 	call	_puthex
   0074 F1            [10]  181 	pop	af
   0075 33            [ 6]  182 	inc	sp
                            183 ;C:\devarea\Libraries\msxclib\lib\conio.c:47: }
   0076 C9            [10]  184 	ret
                            185 ;C:\devarea\Libraries\msxclib\lib\conio.c:49: void puthex16(uint16_t v) {
                            186 ;	---------------------------------
                            187 ; Function puthex16
                            188 ; ---------------------------------
   0077                     189 _puthex16::
                            190 ;C:\devarea\Libraries\msxclib\lib\conio.c:50: puthex(4, v);
   0077 C1            [10]  191 	pop	bc
   0078 E1            [10]  192 	pop	hl
   0079 E5            [11]  193 	push	hl
   007A C5            [11]  194 	push	bc
   007B E5            [11]  195 	push	hl
   007C 3E 04         [ 7]  196 	ld	a, #0x04
   007E F5            [11]  197 	push	af
   007F 33            [ 6]  198 	inc	sp
   0080 CDr21r00      [17]  199 	call	_puthex
   0083 F1            [10]  200 	pop	af
   0084 33            [ 6]  201 	inc	sp
                            202 ;C:\devarea\Libraries\msxclib\lib\conio.c:51: }
   0085 C9            [10]  203 	ret
                            204 ;C:\devarea\Libraries\msxclib\lib\conio.c:53: void putdec(int16_t digits, uint16_t v) {
                            205 ;	---------------------------------
                            206 ; Function putdec
                            207 ; ---------------------------------
   0086                     208 _putdec::
                            209 ;C:\devarea\Libraries\msxclib\lib\conio.c:54: uint8_t fz = 0;
   0086 0E 00         [ 7]  210 	ld	c, #0x00
                            211 ;C:\devarea\Libraries\msxclib\lib\conio.c:55: while (digits > 0) {
   0088                     212 00106$:
   0088 AF            [ 4]  213 	xor	a, a
   0089 FD 21 02 00   [14]  214 	ld	iy, #2
   008D FD 39         [15]  215 	add	iy, sp
   008F FD BE 00      [19]  216 	cp	a, 0 (iy)
   0092 FD 9E 01      [19]  217 	sbc	a, 1 (iy)
   0095 E2r9Ar00      [10]  218 	jp	PO, 00131$
   0098 EE 80         [ 7]  219 	xor	a, #0x80
   009A                     220 00131$:
   009A F0            [11]  221 	ret	P
                            222 ;C:\devarea\Libraries\msxclib\lib\conio.c:56: uint16_t aux = v / digits;
   009B D1            [10]  223 	pop	de
   009C E1            [10]  224 	pop	hl
   009D E5            [11]  225 	push	hl
   009E D5            [11]  226 	push	de
   009F C5            [11]  227 	push	bc
   00A0 E5            [11]  228 	push	hl
   00A1 21 08 00      [10]  229 	ld	hl, #8
   00A4 39            [11]  230 	add	hl, sp
   00A5 4E            [ 7]  231 	ld	c, (hl)
   00A6 23            [ 6]  232 	inc	hl
   00A7 46            [ 7]  233 	ld	b, (hl)
   00A8 C5            [11]  234 	push	bc
   00A9 CDr00r00      [17]  235 	call	__divuint
   00AC F1            [10]  236 	pop	af
   00AD F1            [10]  237 	pop	af
   00AE 11 0A 00      [10]  238 	ld	de, #0x000a
   00B1 D5            [11]  239 	push	de
   00B2 E5            [11]  240 	push	hl
   00B3 CDr00r00      [17]  241 	call	__moduint
   00B6 F1            [10]  242 	pop	af
   00B7 F1            [10]  243 	pop	af
   00B8 C1            [10]  244 	pop	bc
   00B9 7D            [ 4]  245 	ld	a, l
   00BA 47            [ 4]  246 	ld	b, a
                            247 ;C:\devarea\Libraries\msxclib\lib\conio.c:58: if (n != 0 || fz != 0) {
   00BB B7            [ 4]  248 	or	a,a
   00BC 20 03         [12]  249 	jr	NZ,00101$
   00BE B1            [ 4]  250 	or	a,c
   00BF 28 0B         [12]  251 	jr	Z,00102$
   00C1                     252 00101$:
                            253 ;C:\devarea\Libraries\msxclib\lib\conio.c:59: putchar('0' + n);
   00C1 78            [ 4]  254 	ld	a, b
   00C2 C6 30         [ 7]  255 	add	a, #0x30
   00C4 F5            [11]  256 	push	af
   00C5 33            [ 6]  257 	inc	sp
   00C6 CDr00r00      [17]  258 	call	_putchar
   00C9 33            [ 6]  259 	inc	sp
                            260 ;C:\devarea\Libraries\msxclib\lib\conio.c:60: fz = 1;
   00CA 0E 01         [ 7]  261 	ld	c, #0x01
   00CC                     262 00102$:
                            263 ;C:\devarea\Libraries\msxclib\lib\conio.c:62: digits /= 10;
   00CC C5            [11]  264 	push	bc
   00CD 21 0A 00      [10]  265 	ld	hl, #0x000a
   00D0 E5            [11]  266 	push	hl
   00D1 21 06 00      [10]  267 	ld	hl, #6
   00D4 39            [11]  268 	add	hl, sp
   00D5 4E            [ 7]  269 	ld	c, (hl)
   00D6 23            [ 6]  270 	inc	hl
   00D7 46            [ 7]  271 	ld	b, (hl)
   00D8 C5            [11]  272 	push	bc
   00D9 CDr00r00      [17]  273 	call	__divsint
   00DC F1            [10]  274 	pop	af
   00DD F1            [10]  275 	pop	af
   00DE C1            [10]  276 	pop	bc
   00DF FD 21 02 00   [14]  277 	ld	iy, #2
   00E3 FD 39         [15]  278 	add	iy, sp
   00E5 FD 75 00      [19]  279 	ld	0 (iy), l
   00E8 FD 74 01      [19]  280 	ld	1 (iy), h
                            281 ;C:\devarea\Libraries\msxclib\lib\conio.c:63: if (digits == 1) {
   00EB FD 7E 00      [19]  282 	ld	a, 0 (iy)
   00EE 3D            [ 4]  283 	dec	a
   00EF FD B6 01      [19]  284 	or	a, 1 (iy)
   00F2 20 94         [12]  285 	jr	NZ,00106$
                            286 ;C:\devarea\Libraries\msxclib\lib\conio.c:64: fz = 1;
   00F4 0E 01         [ 7]  287 	ld	c, #0x01
                            288 ;C:\devarea\Libraries\msxclib\lib\conio.c:67: }
   00F6 18 90         [12]  289 	jr	00106$
                            290 ;C:\devarea\Libraries\msxclib\lib\conio.c:70: void putdec8(uint8_t v) {
                            291 ;	---------------------------------
                            292 ; Function putdec8
                            293 ; ---------------------------------
   00F8                     294 _putdec8::
                            295 ;C:\devarea\Libraries\msxclib\lib\conio.c:71: putdec(100, (uint16_t) v);
   00F8 21 02 00      [10]  296 	ld	hl, #2+0
   00FB 39            [11]  297 	add	hl, sp
   00FC 4E            [ 7]  298 	ld	c, (hl)
   00FD 06 00         [ 7]  299 	ld	b, #0x00
   00FF C5            [11]  300 	push	bc
   0100 21 64 00      [10]  301 	ld	hl, #0x0064
   0103 E5            [11]  302 	push	hl
   0104 CDr86r00      [17]  303 	call	_putdec
   0107 F1            [10]  304 	pop	af
   0108 F1            [10]  305 	pop	af
                            306 ;C:\devarea\Libraries\msxclib\lib\conio.c:72: }
   0109 C9            [10]  307 	ret
                            308 ;C:\devarea\Libraries\msxclib\lib\conio.c:75: void putdec16(uint16_t v) {
                            309 ;	---------------------------------
                            310 ; Function putdec16
                            311 ; ---------------------------------
   010A                     312 _putdec16::
                            313 ;C:\devarea\Libraries\msxclib\lib\conio.c:76: putdec(10000, v);
   010A C1            [10]  314 	pop	bc
   010B E1            [10]  315 	pop	hl
   010C E5            [11]  316 	push	hl
   010D C5            [11]  317 	push	bc
   010E E5            [11]  318 	push	hl
   010F 21 10 27      [10]  319 	ld	hl, #0x2710
   0112 E5            [11]  320 	push	hl
   0113 CDr86r00      [17]  321 	call	_putdec
   0116 F1            [10]  322 	pop	af
   0117 F1            [10]  323 	pop	af
                            324 ;C:\devarea\Libraries\msxclib\lib\conio.c:77: }
   0118 C9            [10]  325 	ret
                            326 	.area _CODE
                            327 	.area _INITIALIZER
                            328 	.area _CABS (ABS)
