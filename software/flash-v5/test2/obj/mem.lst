                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.8.0 #10562 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module mem
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _memcpy
                             12 	.globl _memset
                             13 	.globl _memcmp
                             14 ;--------------------------------------------------------
                             15 ; special function registers
                             16 ;--------------------------------------------------------
                             17 ;--------------------------------------------------------
                             18 ; ram data
                             19 ;--------------------------------------------------------
                             20 	.area _DATA
                             21 ;--------------------------------------------------------
                             22 ; ram data
                             23 ;--------------------------------------------------------
                             24 	.area _INITIALIZED
                             25 ;--------------------------------------------------------
                             26 ; absolute external ram data
                             27 ;--------------------------------------------------------
                             28 	.area _DABS (ABS)
                             29 ;--------------------------------------------------------
                             30 ; global & static initialisations
                             31 ;--------------------------------------------------------
                             32 	.area _HOME
                             33 	.area _GSINIT
                             34 	.area _GSFINAL
                             35 	.area _GSINIT
                             36 ;--------------------------------------------------------
                             37 ; Home
                             38 ;--------------------------------------------------------
                             39 	.area _HOME
                             40 	.area _HOME
                             41 ;--------------------------------------------------------
                             42 ; code
                             43 ;--------------------------------------------------------
                             44 	.area _CODE
                             45 ;C:\devarea\Libraries\msxclib\lib\mem.c:8: void memcpy(uint8_t *dest, uint8_t *src, uint16_t n) {
                             46 ;	---------------------------------
                             47 ; Function memcpy
                             48 ; ---------------------------------
   0000                      49 _memcpy::
   0000 F5            [11]   50 	push	af
                             51 ;C:\devarea\Libraries\msxclib\lib\mem.c:9: while (n > 0) {
   0001 21 04 00      [10]   52 	ld	hl, #4
   0004 39            [11]   53 	add	hl, sp
   0005 4E            [ 7]   54 	ld	c, (hl)
   0006 23            [ 6]   55 	inc	hl
   0007 46            [ 7]   56 	ld	b, (hl)
   0008 21 06 00      [10]   57 	ld	hl, #6+0
   000B 39            [11]   58 	add	hl, sp
   000C 7E            [ 7]   59 	ld	a, (hl)
   000D FD 21 00 00   [14]   60 	ld	iy, #0
   0011 FD 39         [15]   61 	add	iy, sp
   0013 FD 77 00      [19]   62 	ld	0 (iy), a
   0016 21 07 00      [10]   63 	ld	hl, #6+1
   0019 39            [11]   64 	add	hl, sp
   001A 7E            [ 7]   65 	ld	a, (hl)
   001B FD 21 00 00   [14]   66 	ld	iy, #0
   001F FD 39         [15]   67 	add	iy, sp
   0021 FD 77 01      [19]   68 	ld	1 (iy), a
   0024 21 08 00      [10]   69 	ld	hl, #8
   0027 39            [11]   70 	add	hl, sp
   0028 5E            [ 7]   71 	ld	e, (hl)
   0029 23            [ 6]   72 	inc	hl
   002A 56            [ 7]   73 	ld	d, (hl)
   002B                      74 00101$:
   002B 7A            [ 4]   75 	ld	a, d
   002C B3            [ 4]   76 	or	a, e
   002D 28 16         [12]   77 	jr	Z,00104$
                             78 ;C:\devarea\Libraries\msxclib\lib\mem.c:10: *dest = *src;
   002F E1            [10]   79 	pop	hl
   0030 E5            [11]   80 	push	hl
   0031 7E            [ 7]   81 	ld	a, (hl)
   0032 02            [ 7]   82 	ld	(bc), a
                             83 ;C:\devarea\Libraries\msxclib\lib\mem.c:11: dest++;
   0033 03            [ 6]   84 	inc	bc
                             85 ;C:\devarea\Libraries\msxclib\lib\mem.c:12: src++;
   0034 FD 21 00 00   [14]   86 	ld	iy, #0
   0038 FD 39         [15]   87 	add	iy, sp
   003A FD 34 00      [23]   88 	inc	0 (iy)
   003D 20 03         [12]   89 	jr	NZ,00117$
   003F FD 34 01      [23]   90 	inc	1 (iy)
   0042                      91 00117$:
                             92 ;C:\devarea\Libraries\msxclib\lib\mem.c:13: n--;
   0042 1B            [ 6]   93 	dec	de
   0043 18 E6         [12]   94 	jr	00101$
   0045                      95 00104$:
                             96 ;C:\devarea\Libraries\msxclib\lib\mem.c:15: }
   0045 F1            [10]   97 	pop	af
   0046 C9            [10]   98 	ret
                             99 ;C:\devarea\Libraries\msxclib\lib\mem.c:18: void memset(uint8_t *s, uint8_t c, uint16_t n) {
                            100 ;	---------------------------------
                            101 ; Function memset
                            102 ; ---------------------------------
   0047                     103 _memset::
                            104 ;C:\devarea\Libraries\msxclib\lib\mem.c:19: while (n > 0) {
   0047 D1            [10]  105 	pop	de
   0048 C1            [10]  106 	pop	bc
   0049 C5            [11]  107 	push	bc
   004A D5            [11]  108 	push	de
   004B 21 05 00      [10]  109 	ld	hl, #5
   004E 39            [11]  110 	add	hl, sp
   004F 5E            [ 7]  111 	ld	e, (hl)
   0050 23            [ 6]  112 	inc	hl
   0051 56            [ 7]  113 	ld	d, (hl)
   0052                     114 00101$:
   0052 7A            [ 4]  115 	ld	a, d
   0053 B3            [ 4]  116 	or	a, e
   0054 C8            [11]  117 	ret	Z
                            118 ;C:\devarea\Libraries\msxclib\lib\mem.c:20: *s = c;
   0055 21 04 00      [10]  119 	ld	hl, #4+0
   0058 39            [11]  120 	add	hl, sp
   0059 7E            [ 7]  121 	ld	a, (hl)
   005A 02            [ 7]  122 	ld	(bc), a
                            123 ;C:\devarea\Libraries\msxclib\lib\mem.c:21: s++;
   005B 03            [ 6]  124 	inc	bc
                            125 ;C:\devarea\Libraries\msxclib\lib\mem.c:22: n--;
   005C 1B            [ 6]  126 	dec	de
                            127 ;C:\devarea\Libraries\msxclib\lib\mem.c:24: }
   005D 18 F3         [12]  128 	jr	00101$
                            129 ;C:\devarea\Libraries\msxclib\lib\mem.c:27: unsigned char memcmp(uint8_t *dest, uint8_t *src, uint16_t n)
                            130 ;	---------------------------------
                            131 ; Function memcmp
                            132 ; ---------------------------------
   005F                     133 _memcmp::
   005F F5            [11]  134 	push	af
   0060 F5            [11]  135 	push	af
                            136 ;C:\devarea\Libraries\msxclib\lib\mem.c:29: while (n > 0) {
   0061 21 06 00      [10]  137 	ld	hl, #6
   0064 39            [11]  138 	add	hl, sp
   0065 4E            [ 7]  139 	ld	c, (hl)
   0066 23            [ 6]  140 	inc	hl
   0067 46            [ 7]  141 	ld	b, (hl)
   0068 21 08 00      [10]  142 	ld	hl, #8+0
   006B 39            [11]  143 	add	hl, sp
   006C 7E            [ 7]  144 	ld	a, (hl)
   006D FD 21 02 00   [14]  145 	ld	iy, #2
   0071 FD 39         [15]  146 	add	iy, sp
   0073 FD 77 00      [19]  147 	ld	0 (iy), a
   0076 21 09 00      [10]  148 	ld	hl, #8+1
   0079 39            [11]  149 	add	hl, sp
   007A 7E            [ 7]  150 	ld	a, (hl)
   007B FD 21 02 00   [14]  151 	ld	iy, #2
   007F FD 39         [15]  152 	add	iy, sp
   0081 FD 77 01      [19]  153 	ld	1 (iy), a
   0084 21 0A 00      [10]  154 	ld	hl, #10
   0087 39            [11]  155 	add	hl, sp
   0088 5E            [ 7]  156 	ld	e, (hl)
   0089 23            [ 6]  157 	inc	hl
   008A 56            [ 7]  158 	ld	d, (hl)
   008B                     159 00103$:
   008B 7A            [ 4]  160 	ld	a, d
   008C B3            [ 4]  161 	or	a, e
   008D 28 3C         [12]  162 	jr	Z,00105$
                            163 ;C:\devarea\Libraries\msxclib\lib\mem.c:30: if (*dest != *src) {
   008F 0A            [ 7]  164 	ld	a, (bc)
   0090 FD 21 01 00   [14]  165 	ld	iy, #1
   0094 FD 39         [15]  166 	add	iy, sp
   0096 FD 77 00      [19]  167 	ld	0 (iy), a
   0099 21 02 00      [10]  168 	ld	hl, #2
   009C 39            [11]  169 	add	hl, sp
   009D 7E            [ 7]  170 	ld	a, (hl)
   009E 23            [ 6]  171 	inc	hl
   009F 66            [ 7]  172 	ld	h, (hl)
   00A0 6F            [ 4]  173 	ld	l, a
   00A1 7E            [ 7]  174 	ld	a, (hl)
   00A2 33            [ 6]  175 	inc	sp
   00A3 F5            [11]  176 	push	af
   00A4 33            [ 6]  177 	inc	sp
   00A5 21 01 00      [10]  178 	ld	hl, #1+0
   00A8 39            [11]  179 	add	hl, sp
   00A9 7E            [ 7]  180 	ld	a, (hl)
   00AA FD 21 00 00   [14]  181 	ld	iy, #0
   00AE FD 39         [15]  182 	add	iy, sp
   00B0 FD 96 00      [19]  183 	sub	a, 0 (iy)
   00B3 28 04         [12]  184 	jr	Z,00102$
                            185 ;C:\devarea\Libraries\msxclib\lib\mem.c:31: return 1;
   00B5 2E 01         [ 7]  186 	ld	l, #0x01
   00B7 18 14         [12]  187 	jr	00106$
   00B9                     188 00102$:
                            189 ;C:\devarea\Libraries\msxclib\lib\mem.c:33: dest++;
   00B9 03            [ 6]  190 	inc	bc
                            191 ;C:\devarea\Libraries\msxclib\lib\mem.c:34: src++;
   00BA FD 21 02 00   [14]  192 	ld	iy, #2
   00BE FD 39         [15]  193 	add	iy, sp
   00C0 FD 34 00      [23]  194 	inc	0 (iy)
   00C3 20 03         [12]  195 	jr	NZ,00124$
   00C5 FD 34 01      [23]  196 	inc	1 (iy)
   00C8                     197 00124$:
                            198 ;C:\devarea\Libraries\msxclib\lib\mem.c:35: n--;
   00C8 1B            [ 6]  199 	dec	de
   00C9 18 C0         [12]  200 	jr	00103$
   00CB                     201 00105$:
                            202 ;C:\devarea\Libraries\msxclib\lib\mem.c:37: return 0;
   00CB 2E 00         [ 7]  203 	ld	l, #0x00
   00CD                     204 00106$:
                            205 ;C:\devarea\Libraries\msxclib\lib\mem.c:38: }
   00CD F1            [10]  206 	pop	af
   00CE F1            [10]  207 	pop	af
   00CF C9            [10]  208 	ret
                            209 	.area _CODE
                            210 	.area _INITIALIZER
                            211 	.area _CABS (ABS)
